COPTS = [
    "-D_GNU_SOURCE",
    "-D_REENTRANT",
]
cc_library(
    name = 'jemalloc',
    srcs = [
        'src/jemalloc.c',
        'src/arena.c',
        'src/background_thread.c',
        'src/base.c',
        'src/bin.c',
        'src/bitmap.c',
        'src/ckh.c',
        'src/ctl.c',
        'src/div.c',
        'src/extent.c',
        'src/extent_dss.c',
        'src/extent_mmap.c',
        'src/hash.c',
        'src/hook.c',
        'src/large.c',
        'src/log.c',
        'src/malloc_io.c',
        'src/mutex.c',
        'src/mutex_pool.c',
        'src/nstime.c',
        'src/pages.c',
        'src/prng.c',
        'src/prof.c',
        'src/rtree.c',
        'src/stats.c',
        'src/sc.c',
        'src/sz.c',
        'src/tcache.c',
        'src/test_hooks.c',
        'src/ticker.c',
        'src/tsd.c',
        'src/witness.c',
    ],
    extra_cppflags = COPTS,
    export_incs = './include',
    #incs = ['include', '.'],
    warning = 'no',
    deps = [],
    visibility = ['//thirdparty/jemalloc:jemalloc'],
)